#!/bin/bash

# Install Nmap and friends for good measure.
export DEBIAN_FRONTEND=noninteractive
echo "wireshark wireshark-common/install-setuid boolean true" | debconf-set-selections
apt update && apt install --yes dnsutils whois nmap tcpdump tshark \
    gnupg2 # Required for Metasploit, next.
usermod -a -G wireshark vagrant

mkdir -p bin src
# Insall Metasploit.
wget --quiet -O bin/msfinstall https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb \
    && chmod 755 bin/msfinstall && ./bin/msfinstall

# Grab SecLists so we have some wordlists.
if [ ! -f src/SecLists-master.tar.gz ]; then
    wget --progress=dot:giga -O src/SecLists-master.tar.gz \
        https://github.com/danielmiessler/SecLists/archive/master.tar.gz
fi
tar -xvzf src/SecLists-master.tar.gz

chown -R vagrant:vagrant ~vagrant
